---
sidebar: sidebar 
permalink: backup/anf-cba-overview-of-installation-and-configuration-steps.html 
keywords: bluexp, hana host, backup user, hana system database 
summary: 'Cette section décrit l"installation et la configuration de tous les composants de cette solution.' 
---
= Présentation des étapes d'installation et de configuration
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./../media/


link:anf-cba-cloud-backup-for-applications-concepts-and-best-practices.html["Précédent : concepts et bonnes pratiques de Cloud Backup pour les applications."]

[role="lead"]
Les étapes d'installation et de configuration requises peuvent être divisées en trois zones.

* Installation et configuration des composants NetApp BlueXP.
+
Doit être effectuée une fois pendant la configuration initiale de la solution de protection des données.

* Étapes de préparation de l'hôte et de la base de données HANA.
+
Doit être effectuée pour chaque base de données HANA, qui doit être protégée par CBA.

* Étapes de configuration de Cloud Backup pour les applications.
+
Doit être effectuée pour chaque base de données HANA, qui doit être protégée par CBA.





== Installation et configuration des composants NetApp BlueXP

L'installation et la configuration des composants NetApp BlueXP sont décrites dans le https://docs.netapp.com/us-en/cloud-manager-backup-restore/concept-protect-cloud-app-data-to-cloud.html["Protégez vos données d'applications cloud natives | Documentation NetApp"^].

. Inscrivez-vous à BlueXP et configurez un compte NetApp.
. Déployez le connecteur BlueXP dans votre vnet Azure.
. Créez l'environnement de travail pour Azure NetApp Files dans BlueXP.


image:anf-cba-image5.png["Cette image illustre l'architecture de la solution telle que décrite dans cette section."]



== Étapes de préparation de l'hôte et de la base de données HANA

. Installation DE JAVA 11 sur l'hôte HANA. Java 11 (64 bits) Oracle Java ou OpenJDK doit être installé sur les hôtes de base de données HANA.
. Déployez le plug-in CBA HANA sur l'hôte HANA comme décrit dans link:https://docs.netapp.com/us-en/cloud-manager-backup-restore/task-deploy-snapcenter-plugin-for-sap-hana.html["Déployer le plug-in Cloud Backup pour les applications pour SAP HANA | Documentation NetApp"].
. Créez un utilisateur de sauvegarde sur la base de données du système HANA, comme décrit dans le chapitre suivant.




== Étapes de configuration de Cloud Backup pour les applications

. Ajoutez un hôte HANA à Cloud Backup pour applications.
+
.. Configuration des clés du magasin d'utilisateurs HANA.
.. Configuration de l'empreinte du stockage.


. Créez et attribuez des politiques de sauvegarde au système HANA.
+
.. Opérations de sauvegarde basées sur des snapshots.
.. Opérations de sauvegarde basées sur des fichiers.


. Configurez les opérations de sauvegarde sans volume de données.
+
.. Configuration de l'empreinte du stockage.
.. Créer et affecter une stratégie de sauvegarde.


. Configurer les opérations globales de sauvegarde sans volume de données.
+
.. Configuration des détails du système.
.. Configuration de l'empreinte du stockage.
.. Créer et affecter une stratégie de sauvegarde.




Les chapitres suivants décrivent en détail les étapes de configuration de Cloud Backup pour les applications.



== Créez un utilisateur de sauvegarde sur la base de données système HANA

NetApp recommande de configurer un utilisateur de base de données dédié dans la base de données HANA pour exécuter les opérations de sauvegarde avec CBA. Dans la deuxième étape, une clé de magasin d'utilisateurs SAP HANA est configurée pour cet utilisateur de sauvegarde, et cette clé de magasin d'utilisateurs est utilisée dans la configuration du plug-in Cloud Backup pour les applications SAP HANA. La figure suivante présente SAP HANA Studio via lequel vous pouvez créer l'utilisateur de sauvegarde.

Les privilèges requis sont les suivants :

* administrateur des sauvegardes
* lecture du catalogue
* administrateur de sauvegarde de base de données
* opérateur de récupération de base de données


Pour un système MDC SAP HANA, vous devez créer l'utilisateur dans la base de données du système car toutes les commandes de sauvegarde pour le système et les bases de données des locataires sont exécutées à l'aide de la base de données du système.

image:anf-cba-image10.png["Cette capture d'écran montre où créer un utilisateur dans la base de données système."]



== Ajoutez le système HANA à Cloud Backup pour votre application

. Dans BlueXP, sélectionnez *protection* > *sauvegarde et récupération* > *applications.*
+
image:anf-cba-image11.png["Cette capture d'écran montre le Canvas de blueXP avec le chemin d'accès correct aux applications affiché."]

. Les captures d'écran suivantes montrent le flux de travail lors de l'ajout du premier système HANA. Si des systèmes sont déjà ajoutés à Cloud Backup pour applications, l'écran initial est une vue de tableau de bord avec un bouton *Ajouter un système* pour ajouter un système HANA supplémentaire. Dans ce cas, l'étape 5 est la première étape. Cliquez sur *découvrir l'application*.
+
image:anf-cba-image12.png["Cette capture d'écran montre le workflow lors de l'ajout du premier système HANA."]

. Cliquez sur *Cloud Native*.
+
image:anf-cba-image13.png["Cette capture d'écran illustre la page de sélection hybride vs cloud natif."]

. Cliquez sur *SAP HANA*.
+
image:anf-cba-image14.png["Cette capture d'écran illustre la page de sélection hybride vs cloud natif."]

. Dans l'écran Détails du système, sélectionnez le type de système : conteneur unique HANA ou conteneur de base de données mutualisé. Indiquez le SID du système HANA et saisissez un texte libre comme nom de système.
+
Les captures d'écran suivantes montrent la configuration d'un système SAP HANA PR1.

+
image:anf-cba-image15.png["Cette capture d'écran montre la configuration d'un système SAP HANA PR1."]

. Cliquez sur *Ajouter un hôte de plug-in* pour ajouter l'hôte de base de données HANA. Généralement, un nom d'hôte est utilisé. Les adresses IP fonctionnent également. Port `8145` Est le port par défaut du plug-in HANA qui a été installé sur l'hôte de base de données HANA. Si aucune modification n'a été apportée lors de l'installation du plug-in, le port par défaut est valide.
+

NOTE: Pour un système HANA à plusieurs hôtes, il vous suffit d'ajouter l'hôte sur lequel la base de données du système s'exécute.

+
image:anf-cba-image16.png["Cette capture d'écran montre l'écran de sélection de l'hôte Add-Plug-in."]

. Pour ajouter une clé de magasin d'utilisateurs de base de données HANA, cliquez sur *Ajouter une clé de magasin d'utilisateurs*.
+
Entrez les informations de configuration de la clé de magasin utilisateur pour la base de données HANA. Vous pouvez donner n'importe quel nom comme nom de clé. Les détails système comprennent l'adresse IP et le port de communication avec la base de données système à l'aide du client hdbsql. Pour un système MDC SAP HANA, port `3<instanceNo>13` Est le port standard pour l'accès SQL à la base de données système.

+
Vous devez fournir le nom d'utilisateur et le mot de passe de l'utilisateur de base de données dans la base de données système qui a été précédemment configurée. Cloud Backup pour applications crée automatiquement une clé de magasin utilisateur à l'aide de ces informations et utilise la clé pour communiquer avec la base de données HANA.

+
image:anf-cba-image17.png["Cette capture d'écran montre l'écran de sélection Ajouter une clé de stockage utilisateur."]

. Sur l'hôte HANA, vous pouvez vérifier si la clé fonctionne en exécutant les commandes suivantes :
+
....
pr1adm@vm-pr1:/usr/sap/PR1/HDB01> hdbuserstore list
DATA FILE       : /usr/sap/PR1/pr1adm/.hdb/vm-pr1/SSFS_HDB.DAT
KEY FILE        : /usr/sap/PR1/pr1adm/.hdb/vm-pr1/SSFS_HDB.KEY
KEY PR1KEY
  ENV : 10.0.1.20:30113
  USER: SNAPSHOT
KEY PR1SAPDBCTRL
  ENV : vm-pr1:30113
  USER: SAPDBCTRL
pr1adm@vm-pr1:/usr/sap/PR1/HDB01> hdbsql -U PR1KEY
Welcome to the SAP HANA Database interactive terminal.
Type:  \h for help with commands
       \q to quit
hdbsql SYSTEMDB=>
....
. Cliquez sur *Suivant* pour terminer la configuration Détails du système.
+
image:anf-cba-image18.png["Cette capture d'écran affiche l'écran Détails du système."]

. Cliquez sur *Ajouter un stockage* pour configurer l'empreinte de stockage de la base de données HANA.
+
image:anf-cba-image19.png["Cette capture d'écran affiche le bouton Ajouter un stockage sur l'écran empreinte du stockage."]

. Entrez les informations pour les volumes de stockage du système HANA.
. Sélectionnez l'environnement de travail et le compte NetApp utilisés pour les volumes ANF du système HANA. Sélectionnez le volume de données de votre système HANA. Dans notre exemple, c'est `PR1_data_mnt00001`.
+

NOTE: Pour un système SAP HANA à plusieurs hôtes, vous devez sélectionner les volumes de données de tous les hôtes HANA appartenant au système.

+
image:anf-cba-image20.png["Cette capture d'écran affiche l'écran de sélection Ajouter une empreinte de stockage."]

. Cliquez sur *Suivant* pour ajouter l'empreinte du stockage.
+
image:anf-cba-image21.png["Cette capture d'écran montre comment ajouter l'empreinte du stockage."]

. Vérifiez la configuration et cliquez sur *Ajouter un système*.
+
image:anf-cba-image22.png["Cette capture d'écran montre comment ajouter le système de stockage."]

+
image:anf-cba-image23.png["Cette capture d'écran affiche le résultat."]



Le système HANA est à présent ajouté à Cloud Backup pour applications. Pour l'étape suivante, vous devez configurer les opérations de sauvegarde.

image:anf-cba-image24.png["Cette capture d'écran montre où configurer les opérations de sauvegarde."]

link:anf-cba-create-backup-policies.html["Ensuite, créez des règles de sauvegarde."]
